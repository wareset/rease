/* eslint-disable */
function n(){}var t,u,r=1,e=function(i,c){var s=Array,o=Object,a={},v=null,h=o.is||function(n,t){return n===t?0!==n||1/n==1/t:n!=n&&t!=t};function p(n){throw"@rease/signal: "+n}function _(){var n=this;if(0===n.l&&n.g!==a&&(n.t||n.s._.h===n.s._.h.n)){var t,u=n.i,r=n.x,e=!n.g,l=v;v=null,n.l++;for(var i,c,o=0;o<r.length&&((c=(i=u[o])._.c)&&_.call(c),!(e=!h(r[o].v,i._value)));o++);if(e){t=n.c(n.o?function(n){for(var t,u=n.length,r=s(u),e=0;e<u;e++)r[e]=(t=n[e]).b?t.v.get():t.v;return r}(n.o):(v=n,null),n.s._value),v=null;for(var f,p=r.length;p-- >0;)(f=r[p]).g===n.g||n.o?f.v=u[p]._value:(u.splice(p,1),r.splice(p,1)[0].u())}if(n.g=a,n.t=!1,n.l--,v=l,e){var g=n.s,b=g._.o;J(g,b?b(t,g._value):t)}}}function g(n,t){n.l++;var u=t._.w||(t._.w=[]),r=t.subscribe(_,n);return n.l--,u.push(n),function(){u.splice(u.lastIndexOf(n),1),r()}}function b(t,u){if(t.s!==u){var r=t.i.indexOf(u);r<0?(t.i.push(u),t.x.push({g:t.g,v:b,u:t.s._.h===t.s._.h.n?n:g(t,u)})):t.x[r].g=t.g}}function w(n){if(n)for(var t,u=n.length;u-- >0;)(t=n[u]).t||(t.t=!0,w(t.s._.w))}function d(n){n.v===d&&n.f.call(n.c,n.v=this._value)}function y(t){var u=this._;u.c&&function(t){for(var u,r=t.i,e=t.x,l=0,i=t.s._.h;l<e.length&&i!==i.n;l++)(u=e[l]).u===n&&(u.u=g(t,r[l]));t.t=!0,_.call(t)}(u.c),u.f&&(u.l=u.f(this)),d.call(this,t)}function x(){var t=this._;t.l&&t.l(this),t.c&&function(t){for(var u,r,e=t.x,l=e.length,i=t.s._.h;l-- >0&&i===i.n;)u=(r=e[l]).u,r.u=n,u()}(t.c)}function O(t){var u=n;function r(n){i.set(n)}function l(){var t=u;u=n,t.unsubscribe?t.unsubscribe():t()}var i=new e(void 0,{prepare:()=>(u=t.subscribe(r),l)});return i}function S(n){this._value=this._.o(n,this._value)}function m(n){J(this,this._.o(n,this._value))}function J(n,u){h(n._value,u)||(n._value=u,a={},w(n._.w),t(n))}e=class ReaseSignal{constructor(n,t){var u=this._={v:this._value=n,c:t&&t.compute?(this.computed=!0,{s:this,g:null,t:!0,l:0,c:t.compute,i:[],x:[],o:t.observe}):null,h:{n:null,p:null},p:null,r:!0,n:null,f:t&&t.prepare?(this.prepared=!0,t.prepare):null,l:null,o:t&&t.capture?(this.captured=!0,t.capture):null,w:null};u.p=u.h.n=u.h.p=u.h,u.c&&u.c.o&&function(n){for(var t,u,r=n.o,e=r.length,l=s(e),i=0;i<e;i++)(u=null!=(t=r[i])&&"function"==typeof t.subscribe)&&(f(t)||(t=O(t)),b(n,t)),l[i]={v:t,b:u};n.o=l}(u.c),u.o&&l(S,this,[n])}get(){var t=v;v=null,t&&b(t,this);var u,r=this._,e=r.h===r.h.n&&(r.c||r.f)?this.subscribe(n):r.c&&void(0===(u=r.c).l&&u.g!==a&&u.t&&l(_,u)),i=this._value;return e&&e(),v=t,i}set(n){var t=this._;return t.c&&p("computed"),t.o?l(m,this,[n]):J(this,n),this}subscribe(t,u){var r=this,e=r._,i={n:null,p:null,v:d,f:t,c:u};return e.p=(i.p=(i.n=e.p.n).p).n=i.n.p=i,l(i.n===i.p&&(e.c||e.f)?y:d,r,[i]),function(){i&&(i.p.n=i.n,i.n.p=i.p,i.f=n,i=null,e.h===e.h.n&&(e.c||e.l)&&l(x,r))}}toString(...n){var t=this.get();return null!=t&&t.toString?t.toString.apply(t,n):""+t}valueOf(...n){var t=this.get();return null!=t&&t.valueOf?t.valueOf.apply(t,n):t}toJSON(...n){var t=this.get();return null!=t&&t.toJSON?t.toJSON.apply(t,n):t}};var N=e.prototype;o.defineProperty(N,"$",{get:N.get,set:N.set}),(u=new e({f:n})).subscribe((function(n){n.f.apply(n.c,n.a)})),r=null;var j=0;return t=function(n){var t=n._;if(t.r)if(++j>4e4&&p("looping"),t.n=null,t.r=!1,r)r=r._.n=n;else{r=n;for(var u;n;n=n._.n){if(!h((t=n._).v,t.v=u=n._value))for(var e=t.h,l=t.p=e;(l=t.p.n)!==e;)t.c&&_.call(t.c),h(u,n._value)?h((t.p=l).v,u)||l.f.call(l.c,l.v=u):(t.v=u=n._value,t.p=e);t.r=!0}r=null,j=0}},new e(i,c)};function l(n,e,l){r?n.apply(e,l):(u._value={f:n,c:e,a:l},t(u))}function i(){this[0]=this[0].apply(this[1],this[2])}function c(n){return function(...t){return l(i,t=[n,this,t]),t[0]}}function s(n,t){return new e(n,t)}function o(n,t,u){return new e(u,{compute:t,observe:n})}function a(t,u,r){return new e(void 0,{compute:u,observe:t}).subscribe(r||n)}function f(n){return n instanceof e}function v(n){return n instanceof e&&!n._.c}function h(n){return n instanceof e&&!!n._.c}export{l as batch,c as batchify,o as computed,a as effect,f as isSignal,h as isSignalComputed,v as isSignalManually,s as signal};
