/* eslint-disable */
function n(){}var t,u,r=1,i=n,e=function(c,o){var s,f=Array,v=Object,h={},p=null,g=v.is||function(n,t){return n===t?0!==n||1/n==1/t:n!=n&&t!=t};function b(n){throw"@rease/signal: "+n}function d(){var n=this;if(n.g!==h&&0===n.l&&(n.t||n._.h===n._.h.n)){var t,u=n.i,r=n.x,i=!n.g,e=p;p=null,n.l++;for(var l,c=0;c<r.length&&((l=u[c]).c&&d.call(l.c),!(i=!g(r[c].v,l.v)));c++);if(i){t=n.c(n.o?function(n){for(var t,u=n.length,r=f(u),i=0;i<u;i++)r[i]=(t=n[i]).b?t.v.get():t.v;return r}(n.o):(p=n,null),n._.v),p=null;for(var o,s=r.length;s-- >0;)(o=r[s]).g===n.g||n.o?o.v=u[s].v:(u.splice(s,1),r.splice(s,1)[0].u())}if(n.g=h,n.t=!1,n.l--,p=e,i){var v=n._,a=v.o;N(v,a?a(t,v.v):t)}}}function _(n,t){n.l++;var u=t.w||(t.w=[]),r=t.s.subscribe(d,n);return n.l--,u.push(n),function(){var t=u.lastIndexOf(n);t<0||u.splice(t,1),r()}}function w(t,u){if(t._!==u){var r=t.i.indexOf(u);r<0?(t.i.push(u),t.x.push({g:t.g,v:w,u:t._.h===t._.h.n?n:_(t,u)})):t.x[r].g=t.g}}function y(n){if(n)for(var t,u=n.length;u-- >0;)(t=n[u]).t||(t.t=!0,y(t._.w))}function x(n){n.v===x&&n.f.call(n.c,n.v=this.v)}function O(t){this.c&&function(t){for(var u,r=t.i,i=t.x,e=0,l=t._.h;e<i.length&&l!==l.n;e++)(u=i[e]).u===n&&(u.u=_(t,r[e]));t.t=!0,d.call(t)}(this.c),this.f&&(this.l=this.f(this.s)),x.call(this,t)}function m(){this.l&&this.l(this.s),this.c&&function(t){for(var u,r,i=t.x,e=i.length,l=t._.h;e-- >0&&l===l.n;)u=(r=i[e]).u,r.u=n,u()}(this.c)}function S(t){var u=n;function r(n){l.set(n)}function i(){var t=u;u=n,t.unsubscribe?t.unsubscribe():t()}var l=new e(void 0,{prepare:()=>(u=t.subscribe(r),i)});return l}function q(n){this.s._value=this.v=this.o(n,this.v)}function J(n){N(this,this.o(n,this.v))}function N(n,u){g(n.v,u)||(n.s._value=n.v=u,h={},y(n.w),t(n))}i=function(n){return s?null:(s=1,n=n._(),s=0,n)};e=class ReaseSignal{constructor(n,t){var u,r={s:this,v:this._value=n,q:n,d:t&&!t.compute&&void 0!==t.defense?(this.defensed=!0,u=t.defense,function(n){g(n,u)||b("defense")}):null,c:t&&t.compute?(this.computed=!0,{_:null,g:null,t:!0,l:0,c:t.compute,i:[],x:[],o:t.observe}):null,h:{n:null,p:null},p:null,r:!0,n:null,f:t&&t.prepare?(this.prepared=!0,t.prepare):null,l:null,o:t&&t.capture?(this.captured=!0,t.capture):null,w:null};this._=function(){return s&&r},r.p=r.h.n=r.h.p=r.h,r.c&&(r.c._=r,r.c.o&&function(n){for(var t,u,r=n.o,e=r.length,l=f(e),c=0;c<e;c++)(u=null!=(t=r[c])&&"function"==typeof t.subscribe)&&(a(t)||(t=S(t)),w(n,i(t))),l[c]={v:t,b:u};n.o=l}(r.c)),r.o&&t.captureInitial&&l(q,r,[n])}get(){var t=i(this),u=p;p=null,u&&w(u,t);var r,e=t.h===t.h.n&&(t.c||t.f)?this.subscribe(n):t.c&&void((r=t.c).g!==h&&0===r.l&&r.t&&l(d,r)),c=t.v;return e&&e(),p=u,c}set(n,t){var u=i(this);return u.c?b("computed"):u.d&&u.d(t),u.o?l(J,u,[n]):N(u,n),this}subscribe(t,u){var r=i(this),e={n:null,p:null,v:x,f:t,c:u};return r.p=(e.p=(e.n=r.p.n).p).n=e.n.p=e,l(e.n===e.p&&(r.c||r.f)?O:x,r,[e]),function(){e&&(e.p.n=e.n,e.n.p=e.p,e.f=n,e=null,r.h===r.h.n&&(r.c||r.l)&&l(m,r))}}toString(...n){var t=this.get();return null!=t&&t.toString?t.toString.apply(t,n):""+t}valueOf(...n){var t=this.get();return null!=t&&t.valueOf?t.valueOf.apply(t,n):t}toJSON(...n){var t=this.get();return null!=t&&t.toJSON?t.toJSON.apply(t,n):t}};var I=e.prototype;v.defineProperty(I,"$",{get:I.get,set:I.set}),(u=i(new e({f:n}))).s.subscribe(function(n){n.f.apply(n.c,n.a)}),r=null;var j=0;return t=function(n){if(n.r)if(++j>4e4&&b("looping"),n.n=null,n.r=!1,r)r=r.n=n;else{r=n;for(var t;n;n=n.n){if(!g(n.q,n.q=t=n.v))for(var u=n.h,i=n.p=u;(i=n.p.n)!==u;)n.c&&d.call(n.c),g(t,n.v)?g((n.p=i).v,t)||i.f.call(i.c,i.v=t):(n.q=t=n.v,n.p=u);n.r=!0}r=null,j=0}},new e(c,o)};function l(n,i,e){r?n.apply(i,e):(u.v={f:n,c:i,a:e},t(u))}function c(){this[0]=this[0].apply(this[1],this[2])}
/*@__NO_SIDE_EFFECTS__*/function o(n){return function(...t){return l(c,t=[n,this,t]),t[0]}}
/*@__NO_SIDE_EFFECTS__*/function s(n,t){return new e(n,t)}
/*@__NO_SIDE_EFFECTS__*/function f(n,t,u){return new e(u,{compute:t,observe:n})}function v(t,u,r){return new e(void 0,{compute:u,observe:t}).subscribe(r||n)}
/*@__NO_SIDE_EFFECTS__*/function a(n){return n instanceof e}
/*@__NO_SIDE_EFFECTS__*/function h(n){return a(n)&&!!i(n).c}
/*@__NO_SIDE_EFFECTS__*/function p(n){return a(n)&&!!i(n).d}
/*@__NO_SIDE_EFFECTS__*/function g(n){return a(n)&&(!(n=i(n)).c&&!n.d)}export{l as batch,o as batchify,f as computed,v as effect,a as isSignal,h as isSignalComputed,p as isSignalDefensed,g as isSignalStandard,s as signal};
