/* eslint-disable */
function n(){}var t,u,e=1,i=function(l,c){var o=Array,a=Object,f={},v=null,h=a.is||function(n,t){return n===t?0!==n||1/n==1/t:n!=n&&t!=t};function p(n){throw"@rease/signal: "+n}function _(){var n=this;if(0===n.l&&n.g!==f&&(n.t||n.s._.h===n.s._.h.n)){var t,u=n.i,e=n.x,i=!n.g,r=v;v=null,n.l++;for(var l,s,c=0;c<e.length&&((s=(l=u[c])._.c)&&_.call(s),!(i=!h(e[c].v,l._value)));c++);if(i){t=n.c(n.s._value,n.o?function(n){for(var t,u=n.length,e=o(u),i=0;i<u;i++)e[i]=(t=n[i]).b?t.v.get():t.v;return e}(n.o):(v=n,null)),v=null;for(var a,p=e.length;p-- >0;)(a=e[p]).g===n.g||n.o?a.v=u[p]._value:(u.splice(p,1),e.splice(p,1)[0].u())}if(n.g=f,n.t=!1,n.l--,v=r,i){var g=n.s,b=g._.o;J(g,b?b(t,g._value):t)}}}function g(n,t){n.l++;var u=t._.w||(t._.w=[]),e=t.subscribe(_,n);return n.l--,u.push(n),function(){u.splice(u.lastIndexOf(n),1),e()}}function b(t,u){if(t.s!==u){var e=t.i.indexOf(u);e<0?(t.i.push(u),t.x.push({g:t.g,v:b,u:t.s._.h===t.s._.h.n?n:g(t,u)})):t.x[e].g=t.g}}function x(n){if(n)for(var t,u=n.length;u-- >0;)(t=n[u]).t||(t.t=!0,x(t.s._.w))}function w(n){n.v===w&&n.f.call(n.c,n.v=this._value)}function y(t){var u=this._;u.c&&function(t){for(var u,e=t.i,i=t.x,r=0,l=t.s._.h;r<i.length&&l!==l.n;r++)(u=i[r]).u===n&&(u.u=g(t,e[r]));t.t=!0,_.call(t)}(u.c),u.f&&(u.l=u.f(this)),w.call(this,t)}function S(){var t=this._;t.l&&t.l(this),t.c&&function(t){for(var u,e,i=t.x,r=i.length,l=t.s._.h;r-- >0&&l===l.n;)u=(e=i[r]).u,e.u=n,u()}(t.c)}function d(t){var u=n;function e(n){l.set(n)}function r(){u.unsubscribe?u.unsubscribe():u(),u=n}var l=new i(void 0,{prepare:()=>(u=t.subscribe(e),r)});return l}function O(n){this._value=this._.o(n,this._value)}function m(n){J(this,this._.o(n,this._value))}function J(n,u){h(n._value,u)||(n._value=u,f={},x(n._.w),t(n))}i=class ReaseSignal{constructor(n,t){var u=this._={v:n,h:{n:null,p:null},p:null,r:!0,n:null,f:t&&t.prepare||null,l:null,o:t&&t.capture||null,w:null,c:t&&t.compute?{s:this,g:null,t:!0,l:0,c:t.compute,i:[],x:[],o:t.observe}:null};this._value=n,u.p=u.h.n=u.h.p=u.h,u.c&&u.c.o&&function(n){for(var t,u,e=n.o,i=e.length,r=o(i),l=0;l<i;l++)(u=null!=(t=e[l])&&"function"==typeof t.subscribe)&&(s(t)||(t=d(t)),b(n,t)),r[l]={v:t,b:u};n.o=r}(u.c),u.o&&r(O,this,[n])}get(){var t=v;v=null,t&&b(t,this);var u,e=this._,i=e.h===e.h.n&&(e.c||e.f)?this.subscribe(n):e.c&&void(0===(u=e.c).l&&u.g!==f&&u.t&&r(_,u)),l=this._value;return i&&i(),v=t,l}set(n){var t=this._;return t.c&&p("computed"),t.o?r(m,this,[n]):J(this,n),this}subscribe(t,u){var e=this,i=e._,l={n:null,p:null,v:w,f:t,c:u};return i.p=(l.p=(l.n=i.p.n).p).n=l.n.p=l,r(l.n===l.p&&(i.c||i.f)?y:w,e,[l]),function(){l&&(l.p.n=l.n,l.n.p=l.p,l.f=n,l=null,i.h===i.h.n&&(i.c||i.l)&&r(S,e))}}toString(...n){var t=this.get();return null!=t&&t.toString?t.toString.apply(t,n):""+t}valueOf(...n){var t=this.get();return null!=t&&t.valueOf?t.valueOf.apply(t,n):t}toJSON(...n){var t=this.get();return null!=t&&t.toJSON?t.toJSON.apply(t,n):t}};var N=i.prototype;a.defineProperty(N,"$",{get:N.get,set:N.set}),(u=new i({f:n})).subscribe((function(n){n.f.apply(n.c,n.a)})),e=null;var j=0;return t=function(n){var t=n._;if(t.r)if(t.n=null,t.r=!1,e)++j>4e4&&p("looping"),e=e._.n=n;else{e=n;for(var u;n;n=n._.n){if(!h((t=n._).v,t.v=u=n._value))for(var i=t.h,r=t.p=i;(r=t.p.n)!==i;)t.c&&_.call(t.c),h(u,n._value)?h((t.p=r).v,u)||r.f.call(r.c,r.v=u):(t.v=u=n._value,t.p=i);t.r=!0}e=null,j=0}},new i(l,c)};function r(n,i,r){e?n.apply(i,r):(u._value={f:n,c:i,a:r},t(u))}function l(){this[0]=this[0].apply(this[1],this[2])}function s(n){return n instanceof i}exports.batch=r,exports.batchify=function(n){return function(...t){return r(l,t=[n,this,t]),t[0]}},exports.computed=function(n,t){return new i(void 0,{compute:t,observe:n})},exports.effect=function(t,u,e){return new i(void 0,{compute:u,observe:t}).subscribe(e||n)},exports.isSignal=s,exports.isSignalComputed=function(n){return n instanceof i&&!!n._.c},exports.isSignalStrict=function(n){return n instanceof i&&!n._.c},exports.signal=function(n,t){return new i(n,t)};
